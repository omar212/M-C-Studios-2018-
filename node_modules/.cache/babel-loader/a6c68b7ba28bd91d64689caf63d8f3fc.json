{"ast":null,"code":"import _toConsumableArray from \"/Users/OmarElnagdy/Desktop/React/imdb/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/OmarElnagdy/Desktop/React/imdb/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/OmarElnagdy/Desktop/React/imdb/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/OmarElnagdy/Desktop/React/imdb/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/OmarElnagdy/Desktop/React/imdb/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/OmarElnagdy/Desktop/React/imdb/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/OmarElnagdy/Desktop/React/imdb/src/components/Home/Home.js\";\nimport React, { Component } from 'react';\nimport { API_KEY, API_URL, IMAGE_BASE_URL, POSTER_SIZE, BACKDROP_SIZE } from '../../config.js';\nimport './Home.css';\nimport HeroImage from '../elements/HeroImage/HeroImage';\nimport SearchBar from '../elements/SearchBar/SearchBar';\nimport Spinner from '../elements/Spinner/Spinner';\nimport MovieThumb from '../elements/MovieThumb/MovieThumb';\nimport FourColorGrid from '../elements/FourColGrid/FourColGrid';\nimport LoadMoreBtn from '../elements/LoadMoreBtn/LoadMoreBtn';\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Home)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      movies: [],\n      heroImage: null,\n      loading: false,\n      currentPage: 0,\n      totalPages: 0,\n      searchTerm: ''\n    };\n\n    _this.searchItems = function (searchTerm) {\n      var endpoint = '';\n\n      _this.setState({\n        movies: [],\n        //we want the movies to clear and only show the movies that we searched for\n        loading: true,\n        searchTerm: searchTerm\n      });\n\n      if (searchTerm) {\n        //if there is no search term just call back the endpoint from componentDidMount\n        var _endpoint = \"\".concat(API_URL, \"movie/popular?api_key=\").concat(API_KEY, \"&language=en-US&page=1\");\n      }\n    };\n\n    _this.loadMoreItems = function () {\n      var endpoint = '';\n\n      _this.setState({\n        loading: true\n      });\n\n      if (_this.state.searchTerm === '') {\n        //basically if were not searching for anything that we load the page for the most popular movies\n        endpoint = \"\".concat(API_URL, \"movie/popular?api_key=\").concat(API_KEY, \"&language=en-US&page=\").concat(_this.state.currentPage + 1);\n      } else {\n        endpoint = \"\".concat(API_URL, \"search/movie/?api_key=\").concat(API_KEY, \"&language=en-US&query=\").concat(_this.state.searchTerm, \"&page=\").concat(_this.state.currentPage);\n      }\n\n      _this.fetchItems(endpoint); //will load the next page or load the searched item page\n\n    };\n\n    _this.fetchItems = function (endpoint) {\n      //Second\n      fetch(endpoint).then(function (result) {\n        return result.json();\n      }).then(function (result) {\n        // console.log(result); pull out all the data based on the endpoint\n        _this.setState({\n          movies: _toConsumableArray(_this.state.movies).concat(_toConsumableArray(result.results)),\n          // spread operator to make a copy of the old movie state and then append new movies using ...\n          heroImage: _this.state.heroImage || result.results[0],\n          //if its null it will fill it with first movie with an API fetch else it will stay with the orginal\n          loading: false,\n          currentPage: result.page,\n          totalPages: result.total_pages\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //First\n      this.setState({\n        loading: true\n      });\n      var endpoint = \"\".concat(API_URL, \"movie/popular?api_key=\").concat(API_KEY, \"&language=en-US&page=1\");\n      this.fetchItems(endpoint);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"rmdb-home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, this.state.heroImage ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(HeroImage, {\n        image: \"\".concat(IMAGE_BASE_URL).concat(BACKDROP_SIZE).concat(this.state.heroImage.backdrop_path),\n        title: this.state.heroImage.orginal_title,\n        text: this.state.heroImage.overview,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }), React.createElement(SearchBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      })) : null, \"  \", React.createElement(FourColorGrid, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), React.createElement(Spinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), React.createElement(LoadMoreBtn, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), \"Home\");\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["/Users/OmarElnagdy/Desktop/React/imdb/src/components/Home/Home.js"],"names":["React","Component","API_KEY","API_URL","IMAGE_BASE_URL","POSTER_SIZE","BACKDROP_SIZE","HeroImage","SearchBar","Spinner","MovieThumb","FourColorGrid","LoadMoreBtn","Home","state","movies","heroImage","loading","currentPage","totalPages","searchTerm","searchItems","endpoint","setState","loadMoreItems","fetchItems","fetch","then","result","json","results","page","total_pages","backdrop_path","orginal_title","overview"],"mappings":"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","sourcesContent":["import React,  { Component } from 'react';\nimport { API_KEY, API_URL, IMAGE_BASE_URL, POSTER_SIZE, BACKDROP_SIZE } from '../../config.js';\nimport './Home.css';\nimport HeroImage from '../elements/HeroImage/HeroImage';\nimport SearchBar from '../elements/SearchBar/SearchBar';\nimport Spinner from '../elements/Spinner/Spinner';\nimport MovieThumb from '../elements/MovieThumb/MovieThumb';\nimport FourColorGrid from '../elements/FourColGrid/FourColGrid';\nimport LoadMoreBtn from '../elements/LoadMoreBtn/LoadMoreBtn';\n\nclass Home extends Component {\n  state = {\n    movies: [],\n    heroImage: null,\n    loading: false,\n    currentPage: 0,\n    totalPages: 0,\n    searchTerm: ''\n  }\n\ncomponentDidMount() { //First\n  this.setState({loading: true});\n  const endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=1`;\n  this.fetchItems(endpoint);\n}\n\nsearchItems = (searchTerm) => {\n  let endpoint = '';\n  this.setState({\n    movies: [],   //we want the movies to clear and only show the movies that we searched for\n    loading:true,\n    searchTerm\n  })\n\n  if(searchTerm){ //if there is no search term just call back the endpoint from componentDidMount\n    const endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=1`;\n  }\n}\nloadMoreItems = () => {\n  let endpoint = '';\n  this.setState({ loading: true });\n\n  if(this.state.searchTerm === ''){  //basically if were not searching for anything that we load the page for the most popular movies\n    endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=${this.state.currentPage + 1}`;\n  } else {\n    endpoint = `${API_URL}search/movie/?api_key=${API_KEY}&language=en-US&query=${this.state.searchTerm}&page=${this.state.currentPage}`;\n  }\n  this.fetchItems(endpoint); //will load the next page or load the searched item page\n}\n\nfetchItems = (endpoint) => {   //Second\n  fetch(endpoint)\n  .then(result => result.json())\n  .then(result => {\n    // console.log(result); pull out all the data based on the endpoint\n    this.setState({\n      movies: [...this.state.movies, ...result.results], // spread operator to make a copy of the old movie state and then append new movies using ...\n      heroImage: this.state.heroImage || result.results[0], //if its null it will fill it with first movie with an API fetch else it will stay with the orginal\n      loading: false,\n      currentPage: result.page,\n      totalPages: result.total_pages\n    })\n  })\n}\n  render(){\n    return(\n      <div className = \"rmdb-home\">\n      {this.state.heroImage ?\n      <div>\n        <HeroImage\n          image = {`${IMAGE_BASE_URL}${BACKDROP_SIZE}${this.state.heroImage.backdrop_path}`}\n          title = {this.state.heroImage.orginal_title}\n          text = {this.state.heroImage.overview}\n        />\n        <SearchBar />\n      </div> : null }  {/* it will check if the heroimage exists if so it will render out the heroImage else it will render out null */}\n        <FourColorGrid />\n        <Spinner />\n        <LoadMoreBtn />\n\n          Home\n      </div>\n    )\n  }\n\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}